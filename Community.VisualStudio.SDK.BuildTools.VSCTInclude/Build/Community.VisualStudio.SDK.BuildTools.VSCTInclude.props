<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">
  <PropertyGroup>
    <DefaultItemExcludes>$(DefaultItemExcludes);**/*.vsct</DefaultItemExcludes>
  </PropertyGroup>
  <ItemGroup Condition="'$(BuildingInsideVisualStudio)'=='true'">
    <AvailableItemName Include="VSCTInclude" />
  </ItemGroup>

  <PropertyGroup>
    <EnableDefaultVSCTIncludeItems Condition="'$(EnableDefaultVSCTIncludeItems)'==''">true</EnableDefaultVSCTIncludeItems>
    <VSCTIncludeExclude Condition="'$(VSCTIncludeExclude)'==''">true</VSCTIncludeExclude>
  </PropertyGroup>

  <ItemDefinitionGroup>
    <VSCTInclude>
      <Generator></Generator>
      <Visible>true</Visible>
      <InProject>true</InProject>
    </VSCTInclude>
  </ItemDefinitionGroup>


  <ItemGroup Condition="'$(EnableDefaultVSCTIncludeItems)'!=''">
    <!-- Convert property to items -->
    <_VSCTIncludeExclude Include="$(VSCTIncludeExclude)" Condition="'$(VSCTIncludeExclude)'!=''"/>
    <!-- Do not include VSCTCompile items -->
    <_VSCTIncludeExclude Include="@(VSCTCompile)" />
    <!-- Migrate any None items (e.g. linked items from outside the project) -->
    <VSCTInclude Include="@(None->HasMetadata('Extension')->WithMetadataValue('Extension','.vsct'))" Exclude="@(_VSCTIncludeExclude)" />
    <None Remove="@(VSCTInclude)" />
    <_VSCTIncludeExclude Include="@(VSCTInclude)" />
    <!-- Scoop up any *.vsct items from the project that are not excluded -->
    <VSCTInclude Include="**/*.vsct" Exclude="@(_VSCTIncludeExclude)" />
  </ItemGroup>
</Project>